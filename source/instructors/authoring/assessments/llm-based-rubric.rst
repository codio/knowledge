.. meta::
   :description: Use an LLM to generate a rubric and grade based on that rubric
   
.. _llm-based-rubric:


LLM-Based Rubric Grader
=======================

Codio has provided two versions of the **LLM-Based Rubric Grader**. One requires the instructor to approve the LLM-generated feedback, and the other automatically displays it to the student.

The **LLM Rubric Autograde** assessment is in the **Auto-Graded** section of the assessments menu and the **LLM Rubric** assessment is in the **Manually Graded** section.
More information about adding assessments can be found in our :ref:`assessment documentation <add-assessment>`.

The first two steps for both of these are the same: 

1. Rubric generation
2. LLM-based grading using the generated rubric

.. Note:: Step 3 is required only for the manually graded version - LLM feedback will not be released to the student until the instructor reviews and approves it.

3. Manual approval of LLM-generated grades by the instructor



LLM-Based Rubric Creation (Step 1)
----------------------------------

Add an **LLM Rubric** or **LLM Rubric Autograde** assessment to your guide page and follow the steps below.


1. On the **General** page, enter the following information:

   - **Name** - Enter a short name that describes the test. This name is displayed in the teacher dashboard so the name should reflect the challenge and thereby be clear when reviewing.

     Toggle the **Show Name** setting to hide the name in the challenge text the student sees.
     
   - **Instructions** - Enter text that is shown to the student using optional Markdown formatting.

2. Click **Grading** in the navigation pane and complete the following information:

   - Add a solution file (1) if you wish the rubric creation process to consider your solution.

.. image:: /img/guides/llmbasedrubric.png
   :height: 600
   :alt: Generate a rubric

- Click the **Generate Rubrics** (2) button to initiate the process.

The **Rubric Creation Agent** uses the following items to generate the rubric items:

- The assessment name
- Instructions provided in the **General** tab of the assessment
- Content of the Guide Page where the assessment is being added
- Contents of the provided solution file
- The Course, Module, and Assignment name
- Requirements specified in the Rubric creation tab

.. Note:: If you do not add rubric requirements; the process will use general code grading norms to supply rubric items.

Add your requirements in the **Rubric Requirements** dialog (optional): 

.. image:: /img/guides/llmrubricreqs.png
   :height: 600
   :alt: Area to add your rubric requirements


- Once you are done, click **Generate Using AI**. 
- You can provide additional rubric items by clicking **Add Rubric** and entering information.
- Once you have reviewed the rubric items and other settings, click **Save** to save the assessment.


LLM Grading Based on the Created Rubric (Step 2)
------------------------------------------------

The grading occurs when the student clicks the **Check It** button. The LLM Grading agent uses the following to grade the student's work:

- Instructions provided in the **General** tab of the assessment
- Contents of the Guide page where the assessment is located
- Contents of the specified solution file
- The student file
- The rubric generated in the previous step to identify the grading criteria

Sample feedback for the Auto-Graded Version:

.. image:: /img/guides/rubricfinal.png
    :height: 600
    :alt: Final grading information displayed to the student


Manual Approval by Instructor (Step 3 - only for the manually-graded version)
-----------------------------------------------------------------------------
.. Note::  The student receives information about whether they have passed or failed each rubric item, but does not see the rest of the LLM-generated feedback until after the instructor conducts their review.


Sample student view of the feedback, before teacher approval:

.. image:: /img/guides/rubricprelim.png
    :height: 600
    :alt: Preliminary grading information displayed to the student

In the case of the manually graded version of this assessment, the instructor must open the student's assignment and select the passing test cases as part of the :ref:`grading process <grading>`. The instructor can also edit the comments generated by the LLM. Once this process is complete, click on **Apply Grade**. 

.. Warning:: Once feedback is released to students, it cannot be modified.

Sample Instructor view of LLM-generated feedback:

.. image:: /img/guides/rubricapproval.png
    :height: 600
    :alt: Instructor view of LLM-generated feedback for approval



Rubric Requirements Example
---------------------------

.. code-block:: text

      Use the following criteria, assigning equal weight to each one.
      - Program correctness
      - Proper and efficient usage of a dictionary data structure